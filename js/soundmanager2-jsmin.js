/** @license

 SoundManager 2: JavaScript Sound for the Web
 ----------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.97a.20110801
*/(function(a){function b(b,c){function d(a){return function(b){return!this._t||!this._t._a?(this._t&&this._t.sID?f._wD(g+"ignoring "+b.type+": "+this._t.sID):f._wD(g+"ignoring "+b.type),null):a.call(this,b)}}this.flashVersion=8,this.debugMode=!0,this.debugFlash=!1,this.useConsole=!0,this.waitForWindowLoad=this.consoleOnly=!1,this.nullURL="about:blank",this.allowPolling=!0,this.useFastPolling=!1,this.useMovieStar=!0,this.bgColor="#ffffff",this.useHighPerformance=!1,this.flashPollingInterval=null,this.flashLoadTimeout=1e3,this.wmode=null,this.allowScriptAccess="always",this.useFlashBlock=!1,this.useHTML5Audio=!0,this.html5Test=/^(probably|maybe)$/i,this.preferFlash=!0,this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.defaultOptions={autoLoad:!1,stream:!0,autoPlay:!1,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfailure:null,onfinish:null,onbeforefinish:null,onbeforefinishtime:5e3,onbeforefinishcomplete:null,onjustbeforefinish:null,onjustbeforefinishtime:200,multiShot:!0,multiShotEvents:!1,position:null,pan:0,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.version=null,this.versionNumber="V2.97a.20110801",this.movieURL=null,this.url=b||null,this.altURL=null,this.enabled=this.swfLoaded=!1,this.o=null,this.movieID="sm2-container",this.id=c||"sm2movie",this.swfCSS={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.didFlashBlock=this.specialWmodeCase=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.baseMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.netStreamMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.netStreamTypes=["aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"],this.netStreamPattern=RegExp("\\.("+this.netStreamTypes.join("|")+")(\\?.*)?$","i"),this.mimePattern=this.baseMimeTypes,this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.hasHTML5=typeof Audio!="undefined"&&typeof (new Audio).canPlayType!="undefined",this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var e,f=this,g="HTML5::",h,i=navigator.userAgent,j=a,k=j.location.href.toString(),l=this.flashVersion,m=document,n,o,p=[],q=!0,r,s=!1,t=!1,u=!1,v=!1,w=!1,x,y=0,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R=["log","info","warn","error"],T,U,V,W=null,X=null,Y,Z,$,_,ba,bb,bc,bd,be=!1,bf=!1,bg,bh,bi=null,bj,bk,bl,bm,bn,bo,bp,bq=Array.prototype.slice,br=!1,bs,bt,bu,bv,bw,bx=i.match(/(ipad|iphone|ipod)/i),by=i.match(/(mobile|pre\/|xoom)/i)||bx,bz=i.match(/msie/i),bA=i.match(/webkit/i),bB=i.match(/safari/i)&&!i.match(/chrome/i),bC=i.match(/opera/i),bD=!k.match(/usehtml5audio/i)&&!k.match(/sm2\-ignorebadua/i)&&bB&&i.match(/OS X 10_6_([3-7])/i),bE=typeof console!="undefined"&&typeof console.log!="undefined",bF=typeof m.hasFocus!="undefined"?m.hasFocus():null,bG=bB&&typeof m.hasFocus=="undefined",bH=!bG,bI=/(mp3|mp4|mpa)/i,bJ=m.location?m.location.protocol.match(/http/i):null,bK=bJ?"":"http:";this.useAltURL=!bJ,this._global_a=null,by&&(f.useHTML5Audio=!0,f.preferFlash=!1,bx)&&(br=f.ignoreFlash=!0),this.supported=this.ok=function(){return bi?u&&!v:f.useHTML5Audio&&f.hasHTML5},this.getMovie=function(a){return bz?j[a]:bB?h(a)||m[a]:h(a)},this.createSound=function(a){function b(){c=ba(c),f.sounds[g.id]=new e(g),f.soundIDs.push(g.id);return f.sounds[g.id]}var c=null,d=null,g=null;if(!u||!f.ok())return bc("soundManager.createSound(): "+Y(u?"notOK":"notReady")),!1;arguments.length===2&&(a={id:arguments[0],url:arguments[1]}),g=c=A(a),g.id.toString().charAt(0).match(/^[0-9]$/)&&f._wD("soundManager.createSound(): "+Y("badID",g.id),2),f._wD("soundManager.createSound(): "+g.id+" ("+g.url+")",1);if(bd(g.id,!0))return f._wD("soundManager.createSound(): "+g.id+" exists",1),f.sounds[g.id];if(bk(g))d=b(),f._wD("Loading sound "+g.id+" via HTML5"),d._setup_html5(g);else{l>8&&f.useMovieStar&&(g.isMovieStar===null&&(g.isMovieStar=g.serverURL||g.type&&g.type.match(f.netStreamPattern)||g.url.match(f.netStreamPattern)?!0:!1),g.isMovieStar&&f._wD("soundManager.createSound(): using MovieStar handling"),g.isMovieStar&&(g.usePeakData&&(x("noPeak"),g.usePeakData=!1),g.loops>1&&x("noNSLoop"))),g=bb(g,"soundManager.createSound(): "),d=b();if(l===8)f.o._createSound(g.id,g.onjustbeforefinishtime,g.loops||1,g.usePolicyFile);else if(f.o._createSound(g.id,g.url,g.onjustbeforefinishtime,g.usePeakData,g.useWaveformData,g.useEQData,g.isMovieStar,g.isMovieStar?g.bufferTime:!1,g.loops||1,g.serverURL,g.duration||null,g.autoPlay,!0,g.autoLoad,g.usePolicyFile),!g.serverURL)d.connected=!0,g.onconnect&&g.onconnect.apply(d);!g.serverURL&&(g.autoLoad||g.autoPlay)&&d.load(g)}!g.serverURL&&g.autoPlay&&d.play();return d},this.destroySound=function(a,b){if(!bd(a))return!1;var c=f.sounds[a],d;c._iO={},c.stop(),c.unload();for(d=0;d<f.soundIDs.length;d++)if(f.soundIDs[d]===a){f.soundIDs.splice(d,1);break}b||c.destruct(!0),delete f.sounds[a];return!0},this.load=function(a,b){return bd(a)?f.sounds[a].load(b):!1},this.unload=function(a){return bd(a)?f.sounds[a].unload():!1},this.start=this.play=function(a,b){return!u||!f.ok()?(bc("soundManager.play(): "+Y(u?"notOK":"notReady")),!1):bd(a)?f.sounds[a].play(b):(b instanceof Object||(b={url:b}),b&&b.url?(f._wD('soundManager.play(): attempting to create "'+a+'"',1),b.id=a,f.createSound(b).play()):!1)},this.setPosition=function(a,b){return bd(a)?f.sounds[a].setPosition(b):!1},this.stop=function(a){if(!bd(a))return!1;f._wD("soundManager.stop("+a+")",1);return f.sounds[a].stop()},this.stopAll=function(){var a;f._wD("soundManager.stopAll()",1);for(a in f.sounds)f.sounds.hasOwnProperty(a)&&f.sounds[a].stop()},this.pause=function(a){return bd(a)?f.sounds[a].pause():!1},this.pauseAll=function(){var a;for(a=f.soundIDs.length;a--;)f.sounds[f.soundIDs[a]].pause()},this.resume=function(a){return bd(a)?f.sounds[a].resume():!1},this.resumeAll=function(){var a;for(a=f.soundIDs.length;a--;)f.sounds[f.soundIDs[a]].resume()},this.togglePause=function(a){return bd(a)?f.sounds[a].togglePause():!1},this.setPan=function(a,b){return bd(a)?f.sounds[a].setPan(b):!1},this.setVolume=function(a,b){return bd(a)?f.sounds[a].setVolume(b):!1},this.mute=function(a){var b=0;typeof a!="string"&&(a=null);if(a){if(!bd(a))return!1;f._wD('soundManager.mute(): Muting "'+a+'"');return f.sounds[a].mute()}f._wD("soundManager.mute(): Muting all sounds");for(b=f.soundIDs.length;b--;)f.sounds[f.soundIDs[b]].mute();f.muted=!0;return!0},this.muteAll=function(){f.mute()},this.unmute=function(a){typeof a!="string"&&(a=null);if(a){if(!bd(a))return!1;f._wD('soundManager.unmute(): Unmuting "'+a+'"');return f.sounds[a].unmute()}f._wD("soundManager.unmute(): Unmuting all sounds");for(a=f.soundIDs.length;a--;)f.sounds[f.soundIDs[a]].unmute();f.muted=!1;return!0},this.unmuteAll=function(){f.unmute()},this.toggleMute=function(a){return bd(a)?f.sounds[a].toggleMute():!1},this.getMemoryUse=function(){var a=0;f.o&&l!==8&&(a=parseInt(f.o._getMemoryUse(),10));return a},this.disable=function(a){var b;typeof a=="undefined"&&(a=!1);if(v)return!1;v=!0,x("shutdown",1);for(b=f.soundIDs.length;b--;)T(f.sounds[f.soundIDs[b]]);z(a),bp.remove(j,"load",D);return!0},this.canPlayMIME=function(a){var b;f.hasHTML5&&(b=bl({type:a}));return!bi||b?b:a?a.match(f.mimePattern)?!0:!1:null},this.canPlayURL=function(a){var b;f.hasHTML5&&(b=bl({url:a}));return!bi||b?b:a?a.match(f.filePattern)?!0:!1:null},this.canPlayLink=function(a){return typeof a.type!="undefined"&&a.type&&f.canPlayMIME(a.type)?!0:f.canPlayURL(a.href)},this.getSoundById=function(a,b){if(!a)throw Error("soundManager.getSoundById(): sID is null/undefined");var c=f.sounds[a];!c&&!b&&f._wD('"'+a+'" is an invalid sound ID.',2);return c},this.onready=function(a,b){if(a&&a instanceof Function)return u&&f._wD(Y("queue","onready")),b||(b=j),B("onready",a,b),C(),!0;throw Y("needFunction","onready")},this.ontimeout=function(a,b){if(a&&a instanceof Function)return u&&f._wD(Y("queue","ontimeout")),b||(b=j),B("ontimeout",a,b),C({type:"ontimeout"}),!0;throw Y("needFunction","ontimeout")},this._wD=this._writeDebug=function(a,b,c){var d,e;if(!f.debugMode)return!1;typeof c!="undefined"&&c&&(a=a+" | "+(new Date).getTime());if(bE&&f.useConsole){c=R[b],typeof console[c]!="undefined"?console[c](a):console.log(a);if(f.useConsoleOnly)return!0}try{d=h("soundmanager-debug");if(!d)return!1;e=m.createElement("div"),++y%2===0&&(e.className="sm2-alt"),b=typeof b=="undefined"?0:parseInt(b,10),e.appendChild(m.createTextNode(a)),b&&(b>=2&&(e.style.fontWeight="bold"),b===3&&(e.style.color="#ff3333")),d.insertBefore(e,d.firstChild)}catch(g){}return!0},this._debug=function(){var a,b;x("currentObj",1),a=0;for(b=f.soundIDs.length;a<b;a++)f.sounds[f.soundIDs[a]]._debug()},this.reboot=function(){f._wD("soundManager.reboot()"),f.soundIDs.length&&f._wD("Destroying "+f.soundIDs.length+" SMSound objects...");var a,b;for(a=f.soundIDs.length;a--;)f.sounds[f.soundIDs[a]].destruct();try{bz&&(X=f.o.innerHTML),W=f.o.parentNode.removeChild(f.o),f._wD("Flash movie removed.")}catch(c){x("badRemove",2)}X=W=bi=null,f.enabled=L=u=be=bf=s=t=v=f.swfLoaded=!1,f.soundIDs=f.sounds=[],f.o=null;for(a in p)if(p.hasOwnProperty(a))for(b=p[a].length;b--;)p[a][b].fired=!1;f._wD("soundManager: Rebooting..."),j.setTimeout(f.beginDelayedInit,20)},this.getMoviePercent=function(){return f.o&&typeof f.o.PercentLoaded!="undefined"?f.o.PercentLoaded():null},this.beginDelayedInit=function(){w=!0,K(),setTimeout(function(){if(bf)return!1;N(),J();return bf=!0},20),E()},this.destruct=function(){f._wD("soundManager.destruct()"),f.disable(!0)},bv={abort:d(function(){f._wD(g+"abort: "+this._t.sID)}),canplay:d(function(){if(this._t._html5_canplay)return!0;this._t._html5_canplay=!0,f._wD(g+"canplay: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0);var a=isNaN(this._t.position)?null:this._t.position/1e3;if(this._t.position&&this.currentTime!==a){f._wD(g+"canplay: setting position to "+a);try{this.currentTime=a}catch(b){f._wD(g+"setting position failed: "+b.message,2)}}}),load:d(function(){this._t.loaded||(this._t._onbufferchange(0),this._t._whileloading(this._t.bytesTotal,this._t.bytesTotal,this._t._get_html5_duration()),this._t._onload(!0))}),emptied:d(function(){f._wD(g+"emptied: "+this._t.sID)}),ended:d(function(){f._wD(g+"ended: "+this._t.sID),this._t._onfinish()}),error:d(function(){f._wD(g+"error: "+this.error.code),this._t._onload(!1)}),loadeddata:d(function(){var a=this._t,b=a.bytesTotal||1;f._wD(g+"loadeddata: "+this._t.sID),!a._loaded&&!bB&&(a.duration=a._get_html5_duration(),a._whileloading(b,b,a._get_html5_duration()),a._onload(!0))}),loadedmetadata:d(function(){f._wD(g+"loadedmetadata: "+this._t.sID)}),loadstart:d(function(){f._wD(g+"loadstart: "+this._t.sID),this._t._onbufferchange(1)}),play:d(function(){f._wD(g+"play: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0)}),playing:d(function(){f._wD(g+"playing: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0)}),progress:d(function(a){if(this._t.loaded)return!1;var b,c,d;d=0;var e=a.type==="progress";c=a.target.buffered;var h=a.loaded||0,i=a.total||1;if(c&&c.length){for(b=c.length;b--;)d=c.end(b)-c.start(b);h=d/a.target.duration;if(e&&c.length>1){d=[],c=c.length;for(b=0;b<c;b++)d.push(a.target.buffered.start(b)+"-"+a.target.buffered.end(b));f._wD(g+"progress: timeRanges: "+d.join(", "))}e&&!isNaN(h)&&f._wD(g+"progress: "+this._t.sID+": "+Math.floor(h*100)+"% loaded")}isNaN(h)||(this._t._onbufferchange(0),this._t._whileloading(h,i,this._t._get_html5_duration()),h&&i&&h===i&&bv.load.call(this,a))}),ratechange:d(function(){f._wD(g+"ratechange: "+this._t.sID)}),suspend:d(function(a){f._wD(g+"suspend: "+this._t.sID),bv.progress.call(this,a)}),stalled:d(function(){f._wD(g+"stalled: "+this._t.sID)}),timeupdate:d(function(){this._t._onTimer()}),waiting:d(function(){f._wD(g+"waiting: "+this._t.sID),this._t._onbufferchange(1)})},e=function(a){var b=this,c,d,e;this.sID=a.id,this.url=a.url,this._iO=this.instanceOptions=this.options=A(a),this.pan=this.options.pan,this.volume=this.options.volume,this._lastURL=null,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){if(f.debugMode){var a=null,c=[],d,e;for(a in b.options)b.options[a]!==null&&(b.options[a]instanceof Function?(d=b.options[a].toString(),d=d.replace(/\s\s+/g," "),e=d.indexOf("{"),c.push(" "+a+": {"+d.substr(e+1,Math.min(Math.max(d.indexOf("\n")-1,64),64)).replace(/\n/g,"")+"... }")):c.push(" "+a+": "+b.options[a]));f._wD("SMSound() merged options: {\n"+c.join(", \n")+"\n}")}},this._debug(),this.load=function(a){var c=null;if(typeof a!="undefined")b._iO=A(a,b.options),b.instanceOptions=b._iO;else if(a=b.options,b._iO=a,b.instanceOptions=b._iO,b._lastURL&&b._lastURL!==b.url)x("manURL"),b._iO.url=b.url,b.url=null;b._iO.url||(b._iO.url=b.url),f._wD("SMSound.load(): "+b._iO.url,1);if(b._iO.url===b.url&&b.readyState!==0&&b.readyState!==2)return x("onURL",1),b;b._lastURL=b.url,b.loaded=!1,b.readyState=1,b.playState=0;if(bk(b._iO))c=b._setup_html5(b._iO),c._called_load?f._wD(g+"ignoring request to load again: "+b.sID):(f._wD(g+"load: "+b.sID),b._html5_canplay=!1,c.load(),c._called_load=!0,b._iO.autoPlay&&b.play());else try{b.isHTML5=!1,b._iO=bb(ba(b._iO)),l===8?f.o._load(b.sID,b._iO.url,b._iO.stream,b._iO.autoPlay,b._iO.whileloading?1:0,b._iO.loops||1,b._iO.usePolicyFile):f.o._load(b.sID,b._iO.url,b._iO.stream?!0:!1,b._iO.autoPlay?!0:!1,b._iO.loops||1,b._iO.autoLoad?!0:!1,b._iO.usePolicyFile)}catch(d){x("smError",2),r("onload",!1),O({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return b},this.unload=function(){if(b.readyState!==0){f._wD('SMSound.unload(): "'+b.sID+'"');if(b.isHTML5){if(d(),b._a)b._a.pause(),b._a.src=""}else l===8?f.o._unload(b.sID,f.nullURL):f.o._unload(b.sID);c()}return b},this.destruct=function(a){f._wD('SMSound.destruct(): "'+b.sID+'"');if(b.isHTML5){if(d(),b._a)b._a.pause(),b._a.src="",br||b._remove_html5_events(),b._a._t=null,b._a=null}else b._iO.onfailure=null,f.o._destroySound(b.sID);a||f.destroySound(b.sID,!0)},this.start=this.play=function(a,c){var d,c=c===void 0?!0:c;a||(a={}),b._iO=A(a,b._iO),b._iO=A(b._iO,b.options),b.instanceOptions=b._iO;if(b._iO.serverURL&&!b.connected)return b.getAutoPlay()||(f._wD("SMSound.play():  Netstream not connected yet - setting autoPlay"),b.setAutoPlay(!0)),b;bk(b._iO)&&(b._setup_html5(b._iO),e());if(b.playState===1&&!b.paused)if(d=b._iO.multiShot)f._wD('SMSound.play(): "'+b.sID+'" already playing (multi-shot)',1);else return f._wD('SMSound.play(): "'+b.sID+'" already playing (one-shot)',1),b;if(b.loaded)f._wD('SMSound.play(): "'+b.sID+'"');else if(b.readyState===0)f._wD('SMSound.play(): Attempting to load "'+b.sID+'"',1),b.isHTML5||(b._iO.autoPlay=!0),b.load(b._iO);else{if(b.readyState===2)return f._wD('SMSound.play(): Could not load "'+b.sID+'" - exiting',2),b;f._wD('SMSound.play(): "'+b.sID+'" is loading - attempting to play..',1)}!b.isHTML5&&l===9&&b.position>0&&b.position===b.duration&&(f._wD('SMSound.play(): "'+b.sID+'": Sound at end, resetting to position:0'),b._iO.position=0),b.paused&&b.position&&b.position>0?(f._wD('SMSound.play(): "'+b.sID+'" is resuming from paused state',1),b.resume()):(f._wD('SMSound.play(): "'+b.sID+'" is starting to play'),b.playState=1,b.paused=!1,(!b.instanceCount||b._iO.multiShotEvents||!b.isHTML5&&l>8&&!b.getAutoPlay())&&b.instanceCount++,b.position=typeof b._iO.position!="undefined"&&!isNaN(b._iO.position)?b._iO.position:0,b.isHTML5||(b._iO=bb(ba(b._iO))),b._iO.onplay&&c&&(b._iO.onplay.apply(b),b._onplay_called=!0),b.setVolume(b._iO.volume,!0),b.setPan(b._iO.pan,!0),b.isHTML5?(e(),d=b._setup_html5(),b.setPosition(b._iO.position),d.play()):f.o._start(b.sID,b._iO.loops||1,l===9?b._iO.position:b._iO.position/1e3));return b},this.stop=function(a){b.playState===1&&(b._onbufferchange(0),b.resetOnPosition(0),b.isHTML5||(b.playState=0),b.paused=!1,b._iO.onstop&&b._iO.onstop.apply(b),b.isHTML5?b._a&&(b.setPosition(0),b._a.pause(),b.playState=0,b._onTimer(),d(),b.unload()):(f.o._stop(b.sID,a),b._iO.serverURL&&b.unload()),b.instanceCount=0,b._iO={});return b},this.setAutoPlay=function(a){f._wD("sound "+b.sID+" turned autoplay "+(a?"on":"off")),b._iO.autoPlay=a,b.isHTML5||(f.o._setAutoPlay(b.sID,a),a&&!b.instanceCount&&b.readyState===1&&(b.instanceCount++,f._wD("sound "+b.sID+" incremented instance count to "+b.instanceCount)))},this.getAutoPlay=function(){return b._iO.autoPlay},this.setPosition=function(a){a===void 0&&(a=0);var c=b.isHTML5?Math.max(a,0):Math.min(b.duration||b._iO.duration,Math.max(a,0));b.position=c,a=b.position/1e3,b.resetOnPosition(b.position),b._iO.position=c;if(b.isHTML5){if(b._a)if(b._html5_canplay){if(b._a.currentTime!==a){f._wD("setPosition("+a+"): setting position");try{b._a.currentTime=a,(b.playState===0||b.paused)&&b._a.pause()}catch(d){f._wD("setPosition("+a+"): setting position failed: "+d.message,2)}}}else f._wD("setPosition("+a+"): delaying, sound not ready")}else a=l===9?b.position:a,b.readyState&&b.readyState!==2&&f.o._setPosition(b.sID,a,b.paused||!b.playState);b.isHTML5&&b.paused&&b._onTimer(!0);return b},this.pause=function(a){if(b.paused||b.playState===0&&b.readyState!==1)return b;f._wD("SMSound.pause()"),b.paused=!0,b.isHTML5?(b._setup_html5().pause(),d()):(a||a===void 0)&&f.o._pause(b.sID),b._iO.onpause&&b._iO.onpause.apply(b);return b},this.resume=function(){if(!b.paused)return b;f._wD("SMSound.resume()"),b.paused=!1,b.playState=1,b.isHTML5?(b._setup_html5().play(),e()):(b._iO.isMovieStar&&b.setPosition(b.position),f.o._pause(b.sID)),!b._onplay_called&&b._iO.onplay?(b._iO.onplay.apply(b),b._onplay_called=!0):b._iO.onresume&&b._iO.onresume.apply(b);return b},this.togglePause=function(){f._wD("SMSound.togglePause()");if(b.playState===0)return b.play({position:l===9&&!b.isHTML5?b.position:b.position/1e3}),b;b.paused?b.resume():b.pause();return b},this.setPan=function(a,c){typeof a=="undefined"&&(a=0),typeof c=="undefined"&&(c=!1),b.isHTML5||f.o._setPan(b.sID,a),b._iO.pan=a,c||(b.pan=a,b.options.pan=a);return b},this.setVolume=function(a,c){typeof a=="undefined"&&(a=100),typeof c=="undefined"&&(c=!1),b.isHTML5?b._a&&(b._a.volume=Math.max(0,Math.min(1,a/100))):f.o._setVolume(b.sID,f.muted&&!b.muted||b.muted?0:a),b._iO.volume=a,c||(b.volume=a,b.options.volume=a);return b},this.mute=function(){b.muted=!0,b.isHTML5?b._a&&(b._a.muted=!0):f.o._setVolume(b.sID,0);return b},this.unmute=function(){b.muted=!1;var a=typeof b._iO.volume!="undefined";b.isHTML5?b._a&&(b._a.muted=!1):f.o._setVolume(b.sID,a?b._iO.volume:b.options.volume);return b},this.toggleMute=function(){return b.muted?b.unmute():b.mute()},this.onposition=function(a,c,d){b._onPositionItems.push({position:a,method:c,scope:typeof d!="undefined"?d:b,fired:!1});return b},this.processOnPosition=function(){var a,c;a=b._onPositionItems.length;if(!a||!b.playState||b._onPositionFired>=a)return!1;for(;a--;)if(c=b._onPositionItems[a],!c.fired&&b.position>=c.position)c.method.apply(c.scope,[c.position]),c.fired=!0,f._onPositionFired++;return!0},this.resetOnPosition=function(a){var c,d;c=b._onPositionItems.length;if(!c)return!1;for(;c--;)if(d=b._onPositionItems[c],d.fired&&a<=d.position)d.fired=!1,f._onPositionFired--;return!0},e=function(){b.isHTML5&&bg(b)},d=function(){b.isHTML5&&bh(b)},c=function(){b._onPositionItems=[],b._onPositionFired=0,b._hasTimer=null,b._onplay_called=!1,b._a=null,b._html5_canplay=!1,b.bytesLoaded=null,b.bytesTotal=null,b.position=null,b.duration=b._iO&&b._iO.duration?b._iO.duration:null,b.durationEstimate=null,b.failures=0,b.loaded=!1,b.playState=0,b.paused=!1,b.readyState=0,b.muted=!1,b.didBeforeFinish=!1,b.didJustBeforeFinish=!1,b.isBuffering=!1,b.instanceOptions={},b.instanceCount=0,b.peakData={left:0,right:0},b.waveformData={left:[],right:[]},b.eqData=[],b.eqData.left=[],b.eqData.right=[]},c(),this._onTimer=function(a){var c={};if(b._hasTimer||a)return b._a&&(a||(b.playState>0||b.readyState===1)&&!b.paused)?(b.duration=b._get_html5_duration(),b.durationEstimate=b.duration,a=b._a.currentTime?b._a.currentTime*1e3:0,b._whileplaying(a,c,c,c,c),!0):(f._wD('_onTimer: Warn for "'+b.sID+'": '+(b._a?"":"Could not find element. ")+(b.playState===0?"playState bad, 0?":"playState = "+b.playState+", OK")),!1)},this._get_html5_duration=function(){var a=b._a?b._a.duration*1e3:b._iO?b._iO.duration:void 0;return a&&!isNaN(a)&&a!==Infinity?a:b._iO?b._iO.duration:null},this._setup_html5=function(a){var a=A(b._iO,a),d=br?f._global_a:b._a,e=decodeURI(a.url),g=d&&d._t?d._t.instanceOptions:null;if(d){if(d._t&&g.url===a.url&&(!b._lastURL||b._lastURL===g.url))return d;f._wD("setting new URL on existing object: "+e+(b._lastURL?", old URL: "+b._lastURL:"")),br&&d._t&&d._t.playState&&a.url!==g.url&&d._t.stop(),c(),d.src=a.url,b.url=a.url,b._lastURL=a.url,d._called_load=!1}else if(f._wD("creating HTML5 Audio() element with URL: "+e),d=new Audio(a.url),d._called_load=!1,br)f._global_a=d;b.isHTML5=!0,b._a=d,d._t=b,b._add_html5_events(),d.loop=a.loops>1?"loop":"",a.autoLoad||a.autoPlay?(d.autobuffer="auto",d.preload="auto",b.load(),d._called_load=!0):(d.autobuffer=!1,d.preload="none"),d.loop=a.loops>1?"loop":"";return d},this._add_html5_events=function(){if(b._a._added_events)return!1;var a;f._wD(g+"adding event listeners: "+b.sID),b._a._added_events=!0;for(a in bv)bv.hasOwnProperty(a)&&b._a&&b._a.addEventListener(a,bv[a],!1);return!0},this._remove_html5_events=function(){var a;f._wD(g+"removing event listeners: "+b.sID),b._a._added_events=!1;for(a in bv)bv.hasOwnProperty(a)&&b._a&&b._a.removeEventListener(a,bv[a],!1)},this._onload=function(a){a=a?!0:!1,f._wD('SMSound._onload(): "'+b.sID+'"'+(a?" loaded.":" failed to load? - "+b.url),a?1:2),!a&&!b.isHTML5&&(f.sandbox.noRemote===!0&&f._wD("SMSound._onload(): "+Y("noNet"),1),f.sandbox.noLocal===!0&&f._wD("SMSound._onload(): "+Y("noLocal"),1)),b.loaded=a,b.readyState=a?3:2,b._onbufferchange(0),b._iO.onload&&b._iO.onload.apply(b,[a]);return!0},this._onbufferchange=function(a){if(b.playState===0)return!1;if(a&&b.isBuffering||!a&&!b.isBuffering)return!1;b.isBuffering=a===1,b._iO.onbufferchange&&(f._wD("SMSound._onbufferchange(): "+a),b._iO.onbufferchange.apply(b));return!0},this._onfailure=function(a,c,d){b.failures++,f._wD('SMSound._onfailure(): "'+b.sID+'" count '+b.failures),b._iO.onfailure&&b.failures===1?b._iO.onfailure(b,a,c,d):f._wD("SMSound._onfailure(): ignoring")},this._onbeforefinish=function(){b.didBeforeFinish||(b.didBeforeFinish=!0,b._iO.onbeforefinish&&(f._wD('SMSound._onbeforefinish(): "'+b.sID+'"'),b._iO.onbeforefinish.apply(b)))},this._onjustbeforefinish=function(){b.didJustBeforeFinish||(b.didJustBeforeFinish=!0,b._iO.onjustbeforefinish&&(f._wD('SMSound._onjustbeforefinish(): "'+b.sID+'"'),b._iO.onjustbeforefinish.apply(b)))},this._onfinish=function(){var a=b._iO.onfinish;b._onbufferchange(0),b.resetOnPosition(0),b._iO.onbeforefinishcomplete&&b._iO.onbeforefinishcomplete.apply(b),b.didBeforeFinish=!1,b.didJustBeforeFinish=!1,b.instanceCount&&(b.instanceCount--,b.instanceCount||(b.playState=0,b.paused=!1,b.instanceCount=0,b.instanceOptions={},b._iO={},d()),(!b.instanceCount||b._iO.multiShotEvents)&&a&&(f._wD('SMSound._onfinish(): "'+b.sID+'"'),a.apply(b)))},this._whileloading=function(a,c,d,e){b.bytesLoaded=a,b.bytesTotal=c,b.duration=Math.floor(d),b.bufferLength=e;if(b._iO.isMovieStar)b.durationEstimate=b.duration;else if(b.durationEstimate=b._iO.duration?b.duration>b._iO.duration?b.duration:b._iO.duration:parseInt(b.bytesTotal/b.bytesLoaded*b.duration,10),b.durationEstimate===void 0)b.durationEstimate=b.duration;b.readyState!==3&&b._iO.whileloading&&b._iO.whileloading.apply(b)},this._whileplaying=function(a,c,d,e,g){if(isNaN(a)||a===null)return!1;b.position=a,b.processOnPosition(),!b.isHTML5&&l>8&&(b._iO.usePeakData&&typeof c!="undefined"&&c&&(b.peakData={left:c.leftPeak,right:c.rightPeak}),b._iO.useWaveformData&&typeof d!="undefined"&&d&&(b.waveformData={left:d.split(","),right:e.split(",")}),b._iO.useEQData&&typeof g!="undefined"&&g&&g.leftEQ&&(a=g.leftEQ.split(","),b.eqData=a,b.eqData.left=a,typeof g.rightEQ!="undefined"&&g.rightEQ)&&(b.eqData.right=g.rightEQ.split(","))),b.playState===1&&(!b.isHTML5&&f.flashVersion===8&&!b.position&&b.isBuffering&&b._onbufferchange(0),b._iO.whileplaying&&b._iO.whileplaying.apply(b),(b.loaded||!b.loaded&&b._iO.isMovieStar)&&b._iO.onbeforefinish&&b._iO.onbeforefinishtime&&!b.didBeforeFinish&&b.duration-b.position<=b._iO.onbeforefinishtime&&b._onbeforefinish());return!0},this._onid3=function(a,c){f._wD('SMSound._onid3(): "'+this.sID+'" ID3 data received.');var d=[],e,g;e=0;for(g=a.length;e<g;e++)d[a[e]]=c[e];b.id3=A(b.id3,d),b._iO.onid3&&b._iO.onid3.apply(b)},this._onconnect=function(a){a=a===1,f._wD('SMSound._onconnect(): "'+b.sID+'"'+(a?" connected.":" failed to connect? - "+b.url),a?1:2);if(b.connected=a)b.failures=0,bd(b.sID)&&(b.getAutoPlay()?b.play(void 0,b.getAutoPlay()):b._iO.autoLoad&&b.load()),b._iO.onconnect&&b._iO.onconnect.apply(b,[a])},this._ondataerror=function(a){b.playState>0&&(f._wD("SMSound._ondataerror(): "+a),b._iO.ondataerror&&b._iO.ondataerror.apply(b))}},M=function(){return m.body||m._docElement||m.getElementsByTagName("div")[0]},h=function(a){return m.getElementById(a)},A=function(a,b){var c={},d,e;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);d=typeof b=="undefined"?f.defaultOptions:b;for(e in d)d.hasOwnProperty(e)&&typeof c[e]=="undefined"&&(c[e]=d[e]);return c},bp=function(){function b(a,b){var e=a.shift(),f=[d[b]];c?e[f](a[0],a[1]):e[f].apply(e,a)}function a(a){var a=bq.call(a),b=a.length;c?(a[1]="on"+a[1],b>3&&a.pop()):b===3&&a.push(!1);return a}var c=j.attachEvent,d={add:c?"attachEvent":"addEventListener",remove:c?"detachEvent":"removeEventListener"};return{add:function(){b(a(arguments),"add")},remove:function(){b(a(arguments),"remove")}}}(),bk=function(a){return!a.serverURL&&(a.type?bl({type:a.type}):bl({url:a.url})||f.html5Only)},bl=function(a){function b(a){return f.preferFlash&&bs&&!f.ignoreFlash&&typeof f.flash[a]!="undefined"&&f.flash[a]}if(!f.useHTML5Audio||!f.hasHTML5)return!1;var c=a.url||null,a=a.type||null,d=f.audioFormats,e;if(a&&f.html5[a]!=="undefined")return f.html5[a]&&!b(a);if(!bm){bm=[];for(e in d)d.hasOwnProperty(e)&&(bm.push(e),d[e].related&&(bm=bm.concat(d[e].related)));bm=RegExp("\\.("+bm.join("|")+")(\\?.*)?$","i")}e=c?c.toLowerCase().match(bm):null;if(!e||!e.length)if(a)c=a.indexOf(";"),e=(c!==-1?a.substr(0,c):a).substr(6);else return!1;else e=e[1];return e&&typeof f.html5[e]!="undefined"?f.html5[e]&&!b(e):(a="audio/"+e,c=f.html5.canPlayType({type:a}),(f.html5[e]=c)&&f.html5[a]&&!b(a))},bo=function(){function a(a){var c,d,e=!1;if(!b||typeof b.canPlayType!="function")return!1;if(a instanceof Array){c=0;for(d=a.length;c<d&&!e;c++)if(f.html5[a[c]]||b.canPlayType(a[c]).match(f.html5Test))e=!0,f.html5[a[c]]=!0,f.flash[a[c]]=!(!f.preferFlash||!bs||!a[c].match(bI));return e}return a=b&&typeof b.canPlayType=="function"?b.canPlayType(a):!1,!!a&&!!a.match(f.html5Test)}if(!f.useHTML5Audio||typeof Audio=="undefined")return!1;var b=typeof Audio!="undefined"?bC?new Audio(null):new Audio:null,c,d={},e,g;e=f.audioFormats;for(c in e)if(e.hasOwnProperty(c)&&(d[c]=a(e[c].type),d["audio/"+c]=d[c],f.flash[c]=f.preferFlash&&!f.ignoreFlash&&c.match(bI)?!0:!1,e[c]&&e[c].related))for(g=e[c].related.length;g--;)d["audio/"+e[c].related[g]]=d[c],f.html5[e[c].related[g]]=d[c],f.flash[e[c].related[g]]=d[c];d.canPlayType=b?a:null,f.html5=A(f.html5,d);return!0},I={notReady:"Not loaded yet - wait for soundManager.onload()/onready()",notOK:"Audio support is not available.",domError:"soundManager::createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:"soundManager::createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+m.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for focus-related event..",waitImpatient:"soundManager: Getting impatient, still waiting for Flash%s...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",needFunction:"soundManager: Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',noMS:"MovieStar mode not enabled. Exiting.",currentObj:"--- soundManager._debug(): Current sound objects ---",waitEI:"soundManager::initMovie(): Waiting for ExternalInterface call from Flash..",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager::initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",init:"soundManager::init()",didInit:"soundManager::init(): Already called?",flashJS:"soundManager: Attempting to call Flash from JS..",noPolling:"soundManager: Polling (whileloading()/whileplaying() support) is disabled.",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",noPeak:"Warning: peakData features unsupported for movieStar formats",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smFail:"soundManager: Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+f.swfCSS.swfTimedout+" CSS..",fbLoaded:"Flash loaded",fbHandler:"soundManager::flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access"},Y=function(){var a=bq.call(arguments),b=a.shift(),b=I&&I[b]?I[b]:"",c,d;if(b&&a&&a.length){c=0;for(d=a.length;c<d;c++)b=b.replace("%s",a[c])}return b},ba=function(a){l===8&&a.loops>1&&a.stream&&(x("as2loop"),a.stream=!1);return a},bb=function(a,b){a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData)&&(f._wD((b||"")+Y("policy")),a.usePolicyFile=!0);return a},bc=function(a){typeof console!="undefined"&&typeof console.warn!="undefined"?console.warn(a):f._wD(a)},n=function(){return!1},T=function(a){for(var b in a)a.hasOwnProperty(b)&&typeof a[b]=="function"&&(a[b]=n)},U=function(a){typeof a=="undefined"&&(a=!1);if(v||a)x("smFail",2),f.disable(a)},V=function(a){var b=null;if(a)if(a.match(/\.swf(\?.*)?$/i)){if(b=a.substr
(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");return(a&&a.lastIndexOf("/")!==-1?a.substr(0,a.lastIndexOf("/")+1):"./")+f.movieURL},G=function(){l!==8&&l!==9&&(f._wD(Y("badFV",l,8)),f.flashVersion=8);var a=f.debugMode||f.debugFlash?"_debug.swf":".swf";f.useHTML5Audio&&!f.html5Only&&f.audioFormats.mp4.required&&f.flashVersion<9&&(f._wD(Y("needfl9")),f.flashVersion=9),l=f.flashVersion,f.version=f.versionNumber+(f.html5Only?" (HTML5-only mode)":l===9?" (AS3/Flash 9)":" (AS2/Flash 8)"),l>8&&(f.defaultOptions=A(f.defaultOptions,f.flash9Options),f.features.buffering=!0),l>8&&f.useMovieStar?(f.defaultOptions=A(f.defaultOptions,f.movieStarOptions),f.filePatterns.flash9=RegExp("\\.(mp3|"+f.netStreamTypes.join("|")+")(\\?.*)?$","i"),f.mimePattern=f.netStreamMimeTypes,f.features.movieStar=!0):(f.useMovieStar=!1,f.features.movieStar=!1),f.filePattern=f.filePatterns[l!==8?"flash9":"flash8"],f.movieURL=(l===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a),f.features.peakData=f.features.waveformData=f.features.eqData=l>8},P=function(a,b){if(!f.o||!f.allowPolling)return!1;f.o._setPolling(a,b)},Q=function(){f.debugURLParam.test(k)&&(f.debugMode=!0);if(h(f.debugID))return!1;var a,b,c,d;if(f.debugMode&&!h(f.debugID)&&(!bE||!f.useConsole||f.useConsole&&bE&&!f.consoleOnly)){a=m.createElement("div"),a.id=f.debugID+"-toggle",b={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},a.appendChild(m.createTextNode("-")),a.onclick=_,a.title="Toggle SM2 debug console",i.match(/msie 6/i)&&(a.style.position="absolute",a.style.cursor="hand");for(d in b)b.hasOwnProperty(d)&&(a.style[d]=b[d]);b=m.createElement("div"),b.id=f.debugID,b.style.display=f.debugMode?"block":"none";if(f.debugMode&&!h(a.id)){try{c=M(),c.appendChild(a)}catch(e){throw Error(Y("domError")+" \n"+e.toString())}c.appendChild(b)}}},bd=this.getSoundById,x=function(a,b){return a?f._wD(Y(a),b):""},k.indexOf("sm2-debug=alert")+1&&f.debugMode&&(f._wD=function(b){a.alert(b)}),_=function(){var a=h(f.debugID),b=h(f.debugID+"-toggle");if(!a)return!1;q?(b.innerHTML="+",a.style.display="none"):(b.innerHTML="-",a.style.display="block"),q=!q},r=function(a,b,c){if(typeof sm2Debugger!="undefined")try{sm2Debugger.handleEvent(a,b,c)}catch(d){}return!0},$=function(){var a=[];f.debugMode&&a.push(f.swfCSS.sm2Debug),f.debugFlash&&a.push(f.swfCSS.flashDebug),f.useHighPerformance&&a.push(f.swfCSS.highPerf);return a.join(" ")},Z=function(){var a=Y("fbHandler"),b=f.getMoviePercent(),c=f.swfCSS,d={type:"FLASHBLOCK"};if(f.html5Only)return!1;if(f.ok()){if(f.didFlashBlock&&f._wD(a+": Unblocked"),f.oMC)f.oMC.className=[$(),c.swfDefault,c.swfLoaded+(f.didFlashBlock?" "+c.swfUnblocked:"")].join(" ")}else bi&&(f.oMC.className=$()+" "+c.swfDefault+" "+(b===null?c.swfTimedout:c.swfError),f._wD(a+": "+Y("fbTimeout")+(b?" ("+Y("fbLoaded")+")":""))),f.didFlashBlock=!0,C({type:"ontimeout",ignoreInit:!0,error:d}),O(d)},B=function(a,b,c){typeof p[a]=="undefined"&&(p[a]=[]),p[a].push({method:b,scope:c||null,fired:!1})},C=function(a){a||(a={type:"onready"});if(!u&&a&&!a.ignoreInit)return!1;if(a.type==="ontimeout"&&f.ok())return!1;var b={success:a&&a.ignoreInit?f.ok():!v},c=a&&a.type?p[a.type]||[]:[],d=[],e,g=[b],h=bi&&f.useFlashBlock&&!f.ok();a.error&&(g[0].error=a.error),b=0;for(e=c.length;b<e;b++)c[b].fired!==!0&&d.push(c[b]);if(d.length){f._wD("soundManager: Firing "+d.length+" "+a.type+"() item"+(d.length===1?"":"s")),b=0;for(e=d.length;b<e;b++)if(d[b].scope?d[b].method.apply(d[b].scope,g):d[b].method.apply(this,g),!h)d[b].fired=!0}return!0},D=function(){j.setTimeout(function(){f.useFlashBlock&&Z(),C(),f.onload instanceof Function&&(x("onload",1),f.onload.apply(j),x("onloadOK",1)),f.waitForWindowLoad&&bp.add(j,"load",D)},1)},bt=function(){if(bs!==void 0)return bs;var a=!1,b=navigator,c=b.plugins,d,e=j.ActiveXObject;if(c&&c.length)(b=b.mimeTypes)&&b["application/x-shockwave-flash"]&&b["application/x-shockwave-flash"].enabledPlugin&&b["application/x-shockwave-flash"].enabledPlugin.description&&(a=!0);else if(typeof e!="undefined"){try{d=new e("ShockwaveFlash.ShockwaveFlash")}catch(f){}a=!!d}return bs=a},bj=function(){var a,b;if(i.match(/iphone os (1|2|3_0|3_1)/i)){f.hasHTML5=!1,f.html5Only=!0,f.oMC&&(f.oMC.style.display="none");return!1}if(!f.useHTML5Audio)return!0;if(!f.html5||!f.html5.canPlayType)return f._wD("SoundManager: No HTML5 Audio() support detected."),f.hasHTML5=!1,!0;f.hasHTML5=!0;if(bD&&(f._wD("soundManager::Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(bs?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1),bt()))return!0;for(b in f.audioFormats)f.audioFormats.hasOwnProperty(b)&&(f.audioFormats[b].required&&!f.html5.canPlayType(f.audioFormats[b].type)||f.flash[b]||f.flash[f.audioFormats[b].type])&&(a=!0);f.ignoreFlash&&(a=!1),f.html5Only=f.hasHTML5&&f.useHTML5Audio&&!a;return!f.html5Only},bg=function(a){a._hasTimer||(a._hasTimer=!0)},bh=function(a){a._hasTimer&&(a._hasTimer=!1)},O=function(a){a=typeof a!="undefined"?a:{},f.onerror instanceof Function&&f.onerror.apply(j,[{type:typeof a.type!="undefined"?a.type:null}]),typeof a.fatal!="undefined"&&a.fatal&&f.disable()},bu=function(){if(!bD||!bt())return!1;var a=f.audioFormats,b,c;for(c in a)if(a.hasOwnProperty(c)&&(c==="mp3"||c==="mp4"))if(f._wD("soundManager: Using flash fallback for "+c+" format"),f.html5[c]=!1,a[c]&&a[c].related)for(b=a[c].related.length;b--;)f.html5[a[c].related[b]]=!1},this._setSandboxType=function(a){var b=f.sandbox;b.type=a,b.description=b.types[typeof b.types[a]!="undefined"?a:"unknown"],f._wD("Flash security sandbox type: "+b.type),b.type==="localWithFile"?(b.noRemote=!0,b.noLocal=!1,x("secNote",2)):b.type==="localWithNetwork"?(b.noRemote=!1,b.noLocal=!0):b.type==="localTrusted"&&(b.noRemote=!1,b.noLocal=!1)},this._externalInterfaceOK=function(a){if(f.swfLoaded)return!1;var b=(new Date).getTime();f._wD("soundManager::externalInterfaceOK()"+(a?" (~"+(b-a)+" ms)":"")),r("swf",!0),r("flashtojs",!0),f.swfLoaded=!0,bG=!1,bD&&bu(),bz?setTimeout(o,100):o()},N=function(a,b){function d(a,b){return'<param name="'+a+'" value="'+b+'" />'}function c(){f._wD("-- SoundManager 2 "+f.version+(!f.html5Only&&f.useHTML5Audio?f.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(f.html5Only?"":(f.useMovieStar?", MovieStar mode":"")+(f.useHighPerformance?", high performance mode, ":", ")+((f.flashPollingInterval?"custom ("+f.flashPollingInterval+"ms)":f.useFastPolling?"fast":"normal")+" polling")+(f.wmode?", wmode: "+f.wmode:"")+(f.debugFlash?", flash debug mode":"")+(f.useFlashBlock?", flashBlock mode":""))+" --",1)}if(s&&t)return!1;if(f.html5Only)return G(),c(),f.oMC=h(f.movieID),o(),t=s=!0,!1;var e=b||f.url,g=f.altURL||e,j;j=M();var k,l,n=$(),p,q=null,q=(q=m.getElementsByTagName("html")[0])&&q.dir&&q.dir.match(/rtl/i),a=typeof a=="undefined"?f.id:a;G(),f.url=V(bJ?e:g),b=f.url,f.wmode=!f.wmode&&f.useHighPerformance&&!f.useMovieStar?"transparent":f.wmode,f.wmode!==null&&(i.match(/msie 8/i)||!bz&&!f.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(f.specialWmodeCase=!0,x("spcWmode"),f.wmode=null),j={name:a,id:a,src:b,width:"auto",height:"auto",quality:"high",allowScriptAccess:f.allowScriptAccess,bgcolor:f.bgColor,pluginspage:bK+"//www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:f.wmode,hasPriority:"true"},f.debugFlash&&(j.FlashVars="debug=1"),f.wmode||delete j.wmode;if(bz)e=m.createElement("div"),l=['<object id="'+a+'" data="'+b+'" type="'+j.type+'" title="'+j.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+bK+'//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="'+j.width+'" height="'+j.height+'">',d("movie",b),d("AllowScriptAccess",f.allowScriptAccess),d("quality",j.quality),f.wmode?d("wmode",f.wmode):"",d("bgcolor",f.bgColor),d("hasPriority","true"),f.debugFlash?d("FlashVars",j.FlashVars):"","</object>"].join("");else for(k in e=m.createElement("embed"),j)j.hasOwnProperty(k)&&e.setAttribute(k,j[k]);Q(),n=$();if(j=M())if(f.oMC=h(f.movieID)||m.createElement("div"),f.oMC.id)p=f.oMC.className,f.oMC.className=(p?p+" ":f.swfCSS.swfDefault)+(n?" "+n:""),f.oMC.appendChild(e),bz&&(k=f.oMC.appendChild(m.createElement("div")),k.className=f.swfCSS.swfBox,k.innerHTML=l),t=!0;else{f.oMC.id=f.movieID,f.oMC.className=f.swfCSS.swfDefault+" "+n,k=n=null;if(!f.useFlashBlock)if(f.useHighPerformance)n={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"};else if(n={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},q)n.left=Math.abs(parseInt(n.left,10))+"px";bA&&(f.oMC.style.zIndex=1e4);if(!f.debugFlash)for(p in n)n.hasOwnProperty(p)&&(f.oMC.style[p]=n[p]);try{bz||f.oMC.appendChild(e),j.appendChild(f.oMC),bz&&(k=f.oMC.appendChild(m.createElement("div")),k.className=f.swfCSS.swfBox,k.innerHTML=l),t=!0}catch(r){throw Error(Y("domError")+" \n"+r.toString())}}s=!0,c(),f._wD("soundManager::createMovie(): Trying to load "+b+(!bJ&&f.altURL?" (alternate URL)":""),1);return!0},J=function(){if(f.html5Only)return N(),!1;if(f.o)return!1;f.o=f.getMovie(f.id),f.o||(W?(bz?f.oMC.innerHTML=X:f.oMC.appendChild(W),W=null,s=!0):N(f.id,f.url),f.o=f.getMovie(f.id)),f.o&&x("waitEI"),f.oninitmovie instanceof Function&&setTimeout(f.oninitmovie,1);return!0},E=function(){setTimeout(F,1e3)},F=function(){if(be)return!1;be=!0,bp.remove(j,"load",E);if(bG&&!bF)return x("waitFocus"),!1;var a;u||(a=f.getMoviePercent(),f._wD(Y("waitImpatient",a===100?" (SWF loaded)":a>0?" (SWF "+a+"% loaded)":""))),setTimeout(function(){a=f.getMoviePercent(),u||(f._wD("soundManager: No Flash response within expected time.\nLikely causes: "+(a===0?"Loading "+f.movieURL+" may have failed (and/or Flash "+l+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(f.debugFlash?" "+Y("checkSWF"):""),2),!bJ&&a&&(x("localFail",2),f.debugFlash||x("tryDebug",2)),a===0&&f._wD(Y("swf404",f.url)),r("flashtojs",!1,": Timed out"+bJ?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")),!u&&bH&&(a===null?f.useFlashBlock||f.flashLoadTimeout===0?(f.useFlashBlock&&Z(),x("waitForever")):U(!0):f.flashLoadTimeout===0?x("waitForever"):U(!0))},f.flashLoadTimeout)},H=function(){function a(){bp.remove(j,"focus",H),bp.remove(j,"load",H)}if(bF||!bG)return a(),!0;bF=bH=!0,f._wD("soundManager::handleFocus()"),bB&&bG&&bp.remove(j,"mousemove",H),be=!1,a();return!0},z=function(a){if(u)return!1;if(f.html5Only)return f._wD("-- SoundManager 2: loaded --"),u=!0,D(),r("onload",!0),!0;var b;if(!f.useFlashBlock||!f.flashLoadTimeout||f.getMoviePercent())u=!0,v&&(b={type:!bs&&bi?"NO_FLASH":"INIT_TIMEOUT"});f._wD("-- SoundManager 2 "+(v?"failed to load":"loaded")+" ("+(v?"security/load error":"OK")+") --",1);if(v||a){f.useFlashBlock&&f.oMC&&(f.oMC.className=$()+" "+(f.getMoviePercent()===null?f.swfCSS.swfTimedout:f.swfCSS.swfError)),C({type:"ontimeout",error:b}),r("onload",!1),O(b);return!1}r("onload",!0),bp.add(j,"unload",n);if(f.waitForWindowLoad&&!w)return x("waitOnload"),bp.add(j,"load",D),!1;f.waitForWindowLoad&&w&&x("docLoaded"),D();return!0},bw=function(){var a,b=[];if(f.useHTML5Audio&&f.hasHTML5){for(a in f.audioFormats)f.audioFormats.hasOwnProperty(a)&&b.push(a+": "+f.html5[a]+(!f.html5[a]&&bs&&f.flash[a]?" (using flash)":f.preferFlash&&f.flash[a]&&bs?" (preferring flash)":f.html5[a]?"":" ("+(f.audioFormats[a].required?"required, ":"")+"and no flash support)"));f._wD("-- SoundManager 2: HTML5 support tests ("+f.html5Test+"): "+b.join(", ")+" --",1)}},o=function(){x("init");if(u)return x("didInit"),!1;if(f.html5Only){u||(bp.remove(j,"load",f.beginDelayedInit),f.enabled=!0,z());return!0}J();try{x("flashJS"),f.o._externalInterfaceTest(!1),f.allowPolling?P(!0,f.flashPollingInterval||(f.useFastPolling?10:50)):x("noPolling",1),f.debugMode||f.o._disableDebug(),f.enabled=!0,r("jstoflash",!0)}catch(a){return f._wD("js/flash exception: "+a.toString()),r("jstoflash",!1),O({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),U(!0),z(),!1}z(),bp.remove(j,"load",f.beginDelayedInit);return!0},K=function(){if(L)return!1;L=!0,Q(),function(){var a=k.toLowerCase(),b=null,b=null,c=typeof console!="undefined"&&typeof console.log!="undefined";a.indexOf("sm2-usehtml5audio=")!==-1&&(b=a.charAt(a.indexOf("sm2-usehtml5audio=")+18)==="1",c&&console.log((b?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),f.useHTML5Audio=b),a.indexOf("sm2-preferflash=")!==-1&&(b=a.charAt(a.indexOf("sm2-preferflash=")+16)==="1",c&&console.log((b?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),f.preferFlash=b)}(),!bs&&f.hasHTML5&&(f._wD("SoundManager: No Flash detected"+(f.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5.")),f.useHTML5Audio=!0,f.preferFlash=!1),bo(),f.html5.usingFlash=bj(),bi=f.html5.usingFlash,bw(),!bs&&bi&&(f._wD("SoundManager: Fatal error: Flash is needed to play some required formats, but is not available."),f.flashLoadTimeout=1),m.removeEventListener&&m.removeEventListener("DOMContentLoaded",K,!1),J();return!0},bn=function(){m.readyState==="complete"&&(K(),m.detachEvent("onreadystatechange",bn));return!0},bt(),bp.add(j,"focus",H),bp.add(j,"load",H),bp.add(j,"load",E),bB&&bG&&bp.add(j,"mousemove",H),m.addEventListener?m.addEventListener("DOMContentLoaded",K,!1):m.attachEvent?m.attachEvent("onreadystatechange",bn):(r("onload",!1),O({type:"NO_DOM2_EVENTS",fatal:!0})),m.readyState==="complete"&&setTimeout(K,100)}var c=null;if(typeof SM2_DEFER=="undefined"||!SM2_DEFER)c=new b;a.SoundManager=b,a.soundManager=c})(window)